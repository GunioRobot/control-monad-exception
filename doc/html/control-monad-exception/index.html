<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--Rendered using the Haskell Html Library v0.2-->
<HTML
><HEAD
><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8"
><TITLE
>control-monad-exception-0.5: Explicitly typed, checked exceptions with stack traces</TITLE
><LINK HREF="haddock.css" REL="stylesheet" TYPE="text/css"
><SCRIPT SRC="haddock-util.js" TYPE="text/javascript"
></SCRIPT
></HEAD
><BODY
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD CLASS="topbar"
><TABLE CLASS="vanilla" CELLSPACING="0" CELLPADDING="0"
><TR
><TD
><IMG SRC="haskell_icon.gif" WIDTH="16" HEIGHT="16" ALT=" "
></TD
><TD CLASS="title"
>control-monad-exception-0.5: Explicitly typed, checked exceptions with stack traces</TD
><TD CLASS="topbut"
><A HREF="index.html"
>Contents</A
></TD
><TD CLASS="topbut"
><A HREF="doc-index.html"
>Index</A
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="section1"
>control-monad-exception-0.5: Explicitly typed, checked exceptions with stack traces</TD
></TR
><TR
><TD CLASS="doc"
><P
>This package provides explicitly typed, checked exceptions as a library.
</P
><P
>Computations throwing different types of exception can be combined seamlessly.
</P
><P
><EM
>Example</EM
>
</P
><PRE
> data Expr = Add Expr Expr | Div Expr Expr | Val Double
 eval (Val x)     = return x
 eval (Add a1 a2) = do
    v1 &lt;- eval a1
    v2 &lt;- eval a2
    let sum = v1 + v2
    if sum &lt; v1 || sum &lt; v2 then throw SumOverflow else return sum
 eval (Div a1 a2) = do
    v1 &lt;- eval a1
    v2 &lt;- eval a2
    if v2 == 0 then throw DivideByZero else return (v1 / v2)
</PRE
><PRE
> data DivideByZero = DivideByZero deriving (Show, Typeable)
 data SumOverflow  = SumOverflow  deriving (Show, Typeable)
</PRE
><PRE
> instance Exception DivideByZero
 instance Exception SumOverflow
</PRE
><P
>GHCi infers the following types
</P
><PRE
> eval :: (Throws DivideByZero l, Throws SumOverflow l) =&gt; Expr -&gt; EM l Double
 eval `catch` \ (e::DivideByZero) -&gt; return (-1)  :: Throws SumOverflow l =&gt; Expr -&gt; EM l Double
 runEM(eval `catch` \ (e::SomeException) -&gt; return (-1))  :: Expr -&gt; Double
</PRE
><P
>In addition to explicitly typed exceptions his package provides:
</P
><UL
><LI
> Support for explicitly documented, unchecked exceptions (with <TT
>tryEM</TT
>).
</LI
><LI
> Support for selective unchecked exceptions (with <TT
>UncaughtException</TT
>).
</LI
><LI
> Support for exception call traces via <TT
>MonadLoc</TT
>. <EM
>Example:</EM
>
</LI
></UL
><PRE
>
 f () = do throw MyException
 g a  = do f a

 main = runEMT $ do g () `catchWithSrcLoc`
                        \loc (e::MyException) -&gt; lift(putStrLn$ showExceptionWithTrace loc e)

 -- Running main produces the output:

 *Main&gt; main
  MyException
    in f, Main(example.hs): (1,6)
       g, Main(example.hs): (2,6)
       main, Main(example.hs): (5,9)
       main, Main(example.hs): (4,16)
</PRE
></TD
></TR
><TR
><TD CLASS="section1"
>Modules</TD
></TR
><TR
><TD
><TABLE CLASS="vanilla2" CELLSPACING="0" CELLPADDING="0"
><TR
><TD STYLE="width: 50em"
><IMG SRC="minus.gif" CLASS="coll" ONCLICK="toggle(this,'n:0')" ALT="show/hide"
>Control</TD
><TD
></TD
><TD
></TD
></TR
><TR
><TD STYLE="padding: 0; padding-left: 2em" COLSPAN="3"
><TABLE CLASS="vanilla2" CELLSPACING="0" CELLPADDING="0" ID="n:0" STYLE="display:block;"
><TR
><TD STYLE="width: 48em"
><IMG SRC="minus.gif" CLASS="coll" ONCLICK="toggle(this,'n:1')" ALT="show/hide"
>Monad</TD
><TD
></TD
><TD
></TD
></TR
><TR
><TD STYLE="padding: 0; padding-left: 2em" COLSPAN="3"
><TABLE CLASS="vanilla2" CELLSPACING="0" CELLPADDING="0" ID="n:1" STYLE="display:block;"
><TR
><TD STYLE="width: 46em"
><IMG SRC="minus.gif" CLASS="coll" ONCLICK="toggle(this,'n:2')" ALT="show/hide"
><A HREF="Control-Monad-Exception.html"
>Control.Monad.Exception</A
></TD
><TD
></TD
><TD
></TD
></TR
><TR
><TD STYLE="padding: 0; padding-left: 2em" COLSPAN="3"
><TABLE CLASS="vanilla2" CELLSPACING="0" CELLPADDING="0" ID="n:2" STYLE="display:block;"
><TR
><TD STYLE="padding-left: 1.25em;width: 44em"
><A HREF="Control-Monad-Exception-Catch.html"
>Control.Monad.Exception.Catch</A
></TD
><TD
></TD
><TD
></TD
></TR
><TR
><TD STYLE="padding-left: 1.25em;width: 44em"
><A HREF="Control-Monad-Exception-Throws.html"
>Control.Monad.Exception.Throws</A
></TD
><TD
></TD
><TD
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></TD
></TR
></TABLE
></TD
></TR
><TR
><TD CLASS="s15"
></TD
></TR
><TR
><TD CLASS="botbar"
>Produced by <A HREF="http://www.haskell.org/haddock/"
>Haddock</A
> version 2.4.2</TD
></TR
></TABLE
></BODY
></HTML
>
