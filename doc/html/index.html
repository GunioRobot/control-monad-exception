<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>control-monad-exception-0.9.1: Explicitly typed, checked exceptions with stack traces</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">control-monad-exception-0.9.1: Explicitly typed, checked exceptions with stack traces</p></div><div id="content"><div id="description" class="doc"><h1>control-monad-exception-0.9.1: Explicitly typed, checked exceptions with stack traces</h1><p>This package provides explicitly typed, checked exceptions as a library.
</p><p>Computations throwing different types of exception can be combined seamlessly.
</p><p><em>Example</em>
</p><pre> data Expr = Add Expr Expr | Div Expr Expr | Val Double
 eval (Val x)     = return x
 eval (Add a1 a2) = do
    v1 &lt;- eval a1
    v2 &lt;- eval a2
    let sum = v1 + v2
    if sum &lt; v1 || sum &lt; v2 then throw SumOverflow else return sum
 eval (Div a1 a2) = do
    v1 &lt;- eval a1
    v2 &lt;- eval a2
    if v2 == 0 then throw DivideByZero else return (v1 / v2)
</pre><pre> data DivideByZero = DivideByZero deriving (Show, Typeable)
 data SumOverflow  = SumOverflow  deriving (Show, Typeable)
</pre><pre> instance Exception DivideByZero
 instance Exception SumOverflow
</pre><p>GHCi infers the following types
</p><pre> eval :: (Throws DivideByZero l, Throws SumOverflow l) =&gt; Expr -&gt; EM l Double
 eval `catch` \ (e::DivideByZero) -&gt; return (-1)  :: Throws SumOverflow l =&gt; Expr -&gt; EM l Double
 runEM(eval `catch` \ (e::SomeException) -&gt; return (-1))  :: Expr -&gt; Double
</pre><p>In addition to explicitly typed exceptions his package provides:
</p><ul><li> Support for explicitly documented, unchecked exceptions (via <code>tryEMT</code>).
</li><li> Support for selective unchecked exceptions (via <code>UncaughtException</code>).
</li><li> Support for exception call traces via <code>MonadLoc</code>. <em>Example:</em>
</li></ul><pre>
 f () = do throw MyException
 g a  = do f a

 main = runEMT $ do g () `catchWithSrcLoc`
                        \loc (e::MyException) -&gt; lift(putStrLn$ showExceptionWithTrace loc e)

 -- Running main produces the output:

 *Main&gt; main
  MyException
    in f, Main(example.hs): (1,6)
       g, Main(example.hs): (2,6)
       main, Main(example.hs): (5,9)
       main, Main(example.hs): (4,16)
</pre><p><em>Changes since 0.9.0</em>:
</p><ul><li> Moved to transformers (finally leaving the whole mtl-transformers cisma behind)
</li></ul></div><div id="module-list"><p class="caption">Modules</p><ul><li><span id="control.n.1" class="module collapser" onclick="toggleSection('n.1')">Control</span><ul id="section.n.1" class="show"><li><span id="control.n.1.1" class="module collapser" onclick="toggleSection('n.1.1')">Monad</span><ul id="section.n.1.1" class="show"><li><span class="module"><span id="control.n.1.1.1" class="collapser" onclick="toggleSection('n.1.1.1')">&nbsp;</span><a href="Control-Monad-Exception.html">Control.Monad.Exception</a></span><ul id="section.n.1.1.1" class="show"><li><span class="module"><a href="Control-Monad-Exception-Base.html">Control.Monad.Exception.Base</a></span></li><li><span class="module"><a href="Control-Monad-Exception-Catch.html">Control.Monad.Exception.Catch</a></span></li><li><span class="module"><a href="Control-Monad-Exception-Instances.html">Control.Monad.Exception.Instances</a></span></li><li><span class="module"><a href="Control-Monad-Exception-Throws.html">Control.Monad.Exception.Throws</a></span></li></ul></li></ul></li></ul></li></ul></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.8.0</p></div></body></html>